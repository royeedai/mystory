import{_ as D,m as E,r as f,s as $,c as N,o as h,b as v,A as I,d as a,w as o,e as i,x as L,n as M,E as c,f as V,j as d,q as A}from"./index-CYHA9V5Y.js";import{c as b}from"./index-BCOtO_Mw.js";const R={class:"chapter-list"},T={class:"header"},j={__name:"ChapterList",setup(q){const w=E(),p=V(),l=parseInt(w.params.id),n=f(!1),u=f([]),_=async()=>{n.value=!0;try{const t=await b.getList(l);u.value=t.data||[]}catch(t){c.error(t.message||"加载失败")}finally{n.value=!1}},y=()=>{p.push(`/chapter/edit/${l}`)},C=t=>{p.push(`/chapter/edit/${l}/${t.id}`)},g=async t=>{try{await A.confirm("确定要删除吗？","提示",{type:"warning"}),await b.delete(t.id),c.success("删除成功"),_()}catch(e){e!=="cancel"&&c.error(e.message||"删除失败")}};return $(()=>{_()}),(t,e)=>{const r=i("el-button"),s=i("el-table-column"),k=i("el-table"),x=L("loading");return h(),N("div",R,[v("div",T,[e[1]||(e[1]=v("h2",null,"章节管理",-1)),a(r,{type:"primary",onClick:y},{default:o(()=>[...e[0]||(e[0]=[d("新增章节",-1)])]),_:1})]),I((h(),M(k,{data:u.value,style:{width:"100%"}},{default:o(()=>[a(s,{prop:"chapterNum",label:"序号",width:"80"}),a(s,{prop:"title",label:"标题"}),a(s,{prop:"wordCount",label:"字数",width:"100"}),a(s,{prop:"createTime",label:"创建时间",width:"180"}),a(s,{label:"操作",width:"150"},{default:o(({row:m})=>[a(r,{link:"",type:"primary",onClick:B=>C(m)},{default:o(()=>[...e[2]||(e[2]=[d("编辑",-1)])]),_:1},8,["onClick"]),a(r,{link:"",type:"danger",onClick:B=>g(m)},{default:o(()=>[...e[3]||(e[3]=[d("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[x,n.value]])])}}},G=D(j,[["__scopeId","data-v-1845f9ff"]]);export{G as default};
